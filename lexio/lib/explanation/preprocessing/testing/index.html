<!DOCTYPE html>
<html>
<head>
    <title>Figure Filter Results</title>
    <style>
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Figure Filter Results</h1>
    <div id="results"></div>

    <!-- Load your code -->
    <script src="filterFigure.js"></script>
    <script>
        async function processTextContent() {
            try {
                // Load the JSON file
                const response = await fetch('textContent2.json');
                const data = await response.json();
                
                // Convert the textItems into blocks format
                const blocks = data.blocks.children[0].textItems;
                
                // Run figure detection
                const figureBlocks = filterFigureBlocks(blocks);
                
                // Round numbers to 2 decimal places for cleaner output
                const cleanResult = JSON.parse(JSON.stringify(figureBlocks, (key, value) => {
                    if (typeof value === 'number') {
                        return Number(value.toFixed(2));
                    }
                    return value;
                }));

                // Output results
                const resultsDiv = document.getElementById('results');
                const pre = document.createElement('pre');
                pre.textContent = JSON.stringify(cleanResult, null, 2);
                resultsDiv.appendChild(pre);
            } catch (error) {
                console.error('Error processing text content:', error);
                document.body.innerHTML += `<p style="color: red">Error: ${error.message}</p>`;
            }
        }

        window.addEventListener('load', processTextContent);
    </script>
</body>
</html>
