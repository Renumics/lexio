import{j as o}from"./index-EuO1YB73.js";import{r as t}from"./index-Cqyox1Tj.js";import{T,r as E}from"./provider-DjyZ7jvp.js";import{a as D,R as F}from"./hooks-DNVfckEt.js";import{a as h,s as i}from"./scaleFontSize-B9jNEFC7.js";function L({title:l,titleId:s,...d},u){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":s},d),l?t.createElement("title",{id:s},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const O=t.forwardRef(L);function _({title:l,titleId:s,...d},u){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":s},d),l?t.createElement("title",{id:s},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const q=t.forwardRef(_),M=({componentKey:l,title:s="Retrieved Sources",searchPlaceholder:d="Search knowledge base...",showSearch:u=!0,showRelevanceScore:b=!0,showMetadata:S=!0,styleOverrides:v={}})=>{const{sources:c,activeSources:n,selectedSourceId:g,setSelectedSource:w,searchSources:k,clearSources:C}=D(l?`SourcesDisplay-${l}`:"SourcesDisplay"),[f,j]=t.useState(""),y=t.useContext(T);if(!y)throw new Error("ThemeContext is undefined");const{colors:a,typography:B,componentDefaults:m}=y.theme,e={backgroundColor:a.background,color:a.text,padding:m.padding,borderRadius:m.borderRadius,fontSize:B.fontSizeBase,inputBorderColor:a.primary,inputFocusRingColor:a.primary,buttonBackground:a.primary,buttonTextColor:a.contrast,buttonBorderRadius:m.borderRadius,activeSourceBackground:a.secondaryBackground,activeSourceBorderColor:a.primary,selectedSourceBackground:a.secondaryBackground,selectedSourceBorderColor:a.secondary,inactiveSourceBackground:a.secondaryBackground,inactiveSourceBorderColor:"transparent",metadataTagBackground:a.background,metadataTagColor:a.secondaryText,relevanceScoreColor:a.primary,sourceTypeBackground:h(a.secondary,.17),sourceTypeColor:a.secondary,...E(v)},x=()=>{f.trim()&&k(f)},N=r=>{r.key==="Enter"&&x()};return o.jsx(F,{children:o.jsxs("div",{className:"w-full h-full flex flex-col",style:{backgroundColor:e.backgroundColor,color:e.color,borderRadius:e.borderRadius,fontFamily:e.fontFamily,fontSize:e.fontSize},children:[o.jsxs("div",{className:"flex justify-between items-center p-4",children:[o.jsx("h2",{className:"font-semibold",style:{color:e.color,fontSize:`calc(${e.fontSize} * 1.15)`},children:s}),o.jsx("button",{onClick:C,className:"p-2 rounded-full hover:bg-gray-100 transition-colors disabled:opacity-40 disabled:hover:bg-transparent disabled:cursor-not-allowed",style:{color:e.color,backgroundColor:"transparent",border:"none",cursor:c.length>0?"pointer":"not-allowed"},disabled:c.length===0,title:c.length>0?"Clear all sources":"No sources to clear","aria-label":c.length>0?"Clear all sources":"No sources to clear",children:o.jsx(q,{className:"size-5"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:c.length===0?o.jsx("p",{style:{color:e.color,fontStyle:"italic",fontSize:e.fontSize},children:"No sources available"}):o.jsx("ul",{className:"space-y-3 mb-4",children:c.map((r,z)=>o.jsxs("li",{className:"p-4 shadow-sm border transition-all cursor-pointer",style:{backgroundColor:r.id===g?e.selectedSourceBackground:n&&n.includes(r)?e.activeSourceBackground:(n&&n.length>0,e.inactiveSourceBackground),borderColor:r.id===g||n&&n.includes(r)?e.selectedSourceBorderColor:e.inactiveSourceBorderColor,opacity:n&&n.length>0&&!n.includes(r)?.6:1,borderRadius:e.borderRadius,fontSize:e.fontSize},onClick:()=>w(r.id),children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"overflow-hidden flex-1 mr-2",children:[o.jsx("p",{className:"font-medium truncate",style:{color:e.color,fontSize:i(e.fontSize||"16px",1)},children:r.title}),r.description&&o.jsx("p",{className:"text-gray-500 line-clamp-2",style:{color:h(e.color||a.text,.6),fontSize:i(e.fontSize||"14px",.95)},children:r.description}),b&&r.relevance!==void 0&&o.jsxs("div",{className:"mt-2 flex items-center group relative",children:[o.jsx("span",{style:{color:h(e.color||a.text,.6),fontSize:i(e.fontSize||"12px",.85)},children:"Relevance:"}),o.jsx("div",{className:"ml-2 h-2 w-24 rounded-full",style:{backgroundColor:e.metadataTagBackground},children:o.jsx("div",{className:"h-2 rounded-full",style:{backgroundColor:e.relevanceScoreColor,width:`${Math.round(r.relevance*100)}%`}})}),o.jsxs("div",{className:"absolute bottom-full left-1/3 transform -translate-x-1 mb-1 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-200",style:{backgroundColor:e.backgroundColor,color:e.color,border:`1px solid ${e.metadataTagBackground}`,fontSize:i(e.fontSize||"12px",.75)},children:[Math.round(r.relevance*100),"%"]})]})]}),r.type&&o.jsx("span",{className:"inline-block px-2 py-1 font-medium rounded-full flex-shrink-0",style:{backgroundColor:e.sourceTypeBackground,color:e.sourceTypeColor,fontSize:i(e.fontSize||"12px",.8)},children:r.type})]}),S&&r.metadata&&Object.keys(r.metadata).length>0&&o.jsx("div",{className:"pt-2 border-t",style:{borderColor:e.inactiveSourceBorderColor},children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.metadata).filter(([p])=>typeof p=="string"&&!p.startsWith("_")).map(([p,R])=>o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md",style:{backgroundColor:e.metadataTagBackground,color:e.metadataTagColor,fontSize:i(e.fontSize||"12px",.85),lineHeight:"1.2"},children:[p,": ",R]},p))})})]},z))})}),u&&o.jsx("div",{className:"border-t px-4 py-3",style:{borderColor:e.inputBorderColor+"20",backgroundColor:e.backgroundColor},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`flex-1 flex items-center gap-2 group 
                           bg-white border shadow-[inset_0_1px_2px_rgba(0,0,0,0.02)]
                           focus-within:ring-1 focus-within:ring-opacity-20 transition-all`,style:{borderColor:`${e.inputBorderColor}30`,borderRadius:e.borderRadius},children:[o.jsx(O,{className:"ml-3 size-4 transition-colors group-focus-within:text-primary-600",style:{color:e.buttonBackground+"60"}}),o.jsx("input",{type:"text",value:f,onChange:r=>j(r.target.value),onKeyDown:N,placeholder:d,className:"w-full py-2 pr-3 border-0 focus:ring-0 focus:outline-none",style:{color:e.color,backgroundColor:"transparent",fontSize:e.fontSize}})]}),o.jsx("button",{onClick:x,className:"rounded-md px-4 py-2 transition-all hover:opacity-90 active:transform active:scale-[0.98]",style:{backgroundColor:e.buttonBackground,color:e.buttonTextColor,fontSize:e.fontSize,fontWeight:"500",borderRadius:e.buttonBorderRadius},children:"Search"})]})})]})})};M.__docgenInfo={description:`A component for displaying, searching, and selecting sources.

\`SourcesDisplay\` shows a list of available sources with search functionality,
allowing users to browse, filter, and select sources for viewing or reference.

@component

Features:
- Source listing with titles and metadata
- Search functionality for filtering sources
- Source selection for viewing content
- Relevance score display
- Metadata tag display
- Clear sources functionality
- Responsive design

@example

\`\`\`tsx
<SourcesDisplay
  componentKey="main-sources"
  title="Knowledge Base"
  searchPlaceholder="Search documents..."
  showSearch={true}
  showRelevanceScore={true}
  showMetadata={true}
  styleOverrides={{
    backgroundColor: '#ffffff',
    borderRadius: '8px',
    boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
    padding: '1rem',
  }}
/>
\`\`\``,methods:[],displayName:"SourcesDisplay",props:{title:{defaultValue:{value:'"Retrieved Sources"',computed:!1},required:!1},searchPlaceholder:{defaultValue:{value:'"Search knowledge base..."',computed:!1},required:!1},showSearch:{defaultValue:{value:"true",computed:!1},required:!1},showRelevanceScore:{defaultValue:{value:"true",computed:!1},required:!1},showMetadata:{defaultValue:{value:"true",computed:!1},required:!1},styleOverrides:{defaultValue:{value:"{}",computed:!1},required:!1}}};export{M as S};
