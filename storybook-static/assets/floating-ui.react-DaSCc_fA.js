import{r as u,b as it}from"./index-Cqyox1Tj.js";import{r as ct}from"./index-EuO1YB73.js";function le(){return typeof window<"u"}function z(e){return Fe(e)?(e.nodeName||"").toLowerCase():"#document"}function k(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function V(e){var t;return(t=(Fe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Fe(e){return le()?e instanceof Node||e instanceof k(e).Node:!1}function T(e){return le()?e instanceof Element||e instanceof k(e).Element:!1}function F(e){return le()?e instanceof HTMLElement||e instanceof k(e).HTMLElement:!1}function we(e){return!le()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof k(e).ShadowRoot}function re(e){const{overflow:t,overflowX:o,overflowY:n,display:r}=A(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+o)&&!["inline","contents"].includes(r)}function lt(e){return["table","td","th"].includes(z(e))}function ue(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Re(e){const t=fe(),o=T(e)?A(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>o[n]?o[n]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!t&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!t&&(o.filter?o.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function ut(e){let t=H(e);for(;F(t)&&!$(t);){if(Re(t))return t;if(ue(t))return null;t=H(t)}return null}function fe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $(e){return["html","body","#document"].includes(z(e))}function A(e){return k(e).getComputedStyle(e)}function ae(e){return T(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function H(e){if(z(e)==="html")return e;const t=e.assignedSlot||e.parentNode||we(e)&&e.host||V(e);return we(t)?t.host:t}function Ne(e){const t=H(e);return $(t)?e.ownerDocument?e.ownerDocument.body:e.body:F(t)&&re(t)?t:Ne(t)}function Q(e,t,o){var n;t===void 0&&(t=[]),o===void 0&&(o=!0);const r=Ne(e),c=r===((n=e.ownerDocument)==null?void 0:n.body),s=k(r);if(c){const i=ye(s);return t.concat(s,s.visualViewport||[],re(r)?r:[],i&&o?Q(i):[])}return t.concat(r,Q(r,[],o))}function ye(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ce(e,t){if(!e||!t)return!1;const o=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(o&&we(o)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function ft(e){return"nativeEvent"in e}function at(e){return e.matches("html,body")}function Te(e){return(e==null?void 0:e.ownerDocument)||document}function de(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const o=e;return o.target!=null&&t.contains(o.target)}function te(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Pe=Math.min,ne=Math.max,ie=Math.round,B=e=>({x:e,y:e});function Be(e){return e.split("-")[0]}function dt(e){return e.split("-")[1]}function gt(e){return e==="x"?"y":"x"}function mt(e){return e==="y"?"height":"width"}function We(e){return["top","bottom"].includes(Be(e))?"y":"x"}function pt(e){return gt(We(e))}function $e(e){const{x:t,y:o,width:n,height:r}=e;return{width:n,height:r,top:o,left:t,right:t+n,bottom:o+r,x:t,y:o}}function Se(e,t,o){let{reference:n,floating:r}=e;const c=We(t),s=pt(t),i=mt(s),f=Be(t),l=c==="y",a=n.x+n.width/2-r.width/2,g=n.y+n.height/2-r.height/2,h=n[i]/2-r[i]/2;let d;switch(f){case"top":d={x:a,y:n.y-r.height};break;case"bottom":d={x:a,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:g};break;case"left":d={x:n.x-r.width,y:g};break;default:d={x:n.x,y:n.y}}switch(dt(t)){case"start":d[s]-=h*(o&&l?-1:1);break;case"end":d[s]+=h*(o&&l?-1:1);break}return d}const ht=async(e,t,o)=>{const{placement:n="bottom",strategy:r="absolute",middleware:c=[],platform:s}=o,i=c.filter(Boolean),f=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:a,y:g}=Se(l,n,f),h=n,d={},R=0;for(let m=0;m<i.length;m++){const{name:b,fn:E}=i[m],{x:S,y:x,data:P,reset:D}=await E({x:a,y:g,initialPlacement:n,placement:h,strategy:r,middlewareData:d,rects:l,platform:s,elements:{reference:e,floating:t}});a=S??a,g=x??g,d={...d,[b]:{...d[b],...P}},D&&R<=50&&(R++,typeof D=="object"&&(D.placement&&(h=D.placement),D.rects&&(l=D.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:r}):D.rects),{x:a,y:g}=Se(l,h,f)),m=-1)}return{x:a,y:g,placement:h,strategy:r,middlewareData:d}};function He(e){const t=A(e);let o=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=F(e),c=r?e.offsetWidth:o,s=r?e.offsetHeight:n,i=ie(o)!==c||ie(n)!==s;return i&&(o=c,n=s),{width:o,height:n,$:i}}function Ve(e){return T(e)?e:e.contextElement}function Z(e){const t=Ve(e);if(!F(t))return B(1);const o=t.getBoundingClientRect(),{width:n,height:r,$:c}=He(t);let s=(c?ie(o.width):o.width)/n,i=(c?ie(o.height):o.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!i||!Number.isFinite(i))&&(i=1),{x:s,y:i}}const wt=B(0);function Ke(e){const t=k(e);return!fe()||!t.visualViewport?wt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yt(e,t,o){return t===void 0&&(t=!1),!o||t&&o!==k(e)?!1:t}function oe(e,t,o,n){t===void 0&&(t=!1),o===void 0&&(o=!1);const r=e.getBoundingClientRect(),c=Ve(e);let s=B(1);t&&(n?T(n)&&(s=Z(n)):s=Z(e));const i=yt(c,o,n)?Ke(c):B(0);let f=(r.left+i.x)/s.x,l=(r.top+i.y)/s.y,a=r.width/s.x,g=r.height/s.y;if(c){const h=k(c),d=n&&T(n)?k(n):n;let R=h,m=ye(R);for(;m&&n&&d!==R;){const b=Z(m),E=m.getBoundingClientRect(),S=A(m),x=E.left+(m.clientLeft+parseFloat(S.paddingLeft))*b.x,P=E.top+(m.clientTop+parseFloat(S.paddingTop))*b.y;f*=b.x,l*=b.y,a*=b.x,g*=b.y,f+=x,l+=P,R=k(m),m=ye(R)}}return $e({width:a,height:g,x:f,y:l})}function be(e,t){const o=ae(e).scrollLeft;return t?t.left+o:oe(V(e)).left+o}function Ye(e,t,o){o===void 0&&(o=!1);const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-(o?0:be(e,n)),c=n.top+t.scrollTop;return{x:r,y:c}}function xt(e){let{elements:t,rect:o,offsetParent:n,strategy:r}=e;const c=r==="fixed",s=V(n),i=t?ue(t.floating):!1;if(n===s||i&&c)return o;let f={scrollLeft:0,scrollTop:0},l=B(1);const a=B(0),g=F(n);if((g||!g&&!c)&&((z(n)!=="body"||re(s))&&(f=ae(n)),F(n))){const d=oe(n);l=Z(n),a.x=d.x+n.clientLeft,a.y=d.y+n.clientTop}const h=s&&!g&&!c?Ye(s,f,!0):B(0);return{width:o.width*l.x,height:o.height*l.y,x:o.x*l.x-f.scrollLeft*l.x+a.x+h.x,y:o.y*l.y-f.scrollTop*l.y+a.y+h.y}}function Rt(e){return Array.from(e.getClientRects())}function bt(e){const t=V(e),o=ae(e),n=e.ownerDocument.body,r=ne(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),c=ne(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-o.scrollLeft+be(e);const i=-o.scrollTop;return A(n).direction==="rtl"&&(s+=ne(t.clientWidth,n.clientWidth)-r),{width:r,height:c,x:s,y:i}}function vt(e,t){const o=k(e),n=V(e),r=o.visualViewport;let c=n.clientWidth,s=n.clientHeight,i=0,f=0;if(r){c=r.width,s=r.height;const l=fe();(!l||l&&t==="fixed")&&(i=r.offsetLeft,f=r.offsetTop)}return{width:c,height:s,x:i,y:f}}function Et(e,t){const o=oe(e,!0,t==="fixed"),n=o.top+e.clientTop,r=o.left+e.clientLeft,c=F(e)?Z(e):B(1),s=e.clientWidth*c.x,i=e.clientHeight*c.y,f=r*c.x,l=n*c.y;return{width:s,height:i,x:f,y:l}}function De(e,t,o){let n;if(t==="viewport")n=vt(e,o);else if(t==="document")n=bt(V(e));else if(T(t))n=Et(t,o);else{const r=Ke(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return $e(n)}function Xe(e,t){const o=H(e);return o===t||!T(o)||$(o)?!1:A(o).position==="fixed"||Xe(o,t)}function Ct(e,t){const o=t.get(e);if(o)return o;let n=Q(e,[],!1).filter(i=>T(i)&&z(i)!=="body"),r=null;const c=A(e).position==="fixed";let s=c?H(e):e;for(;T(s)&&!$(s);){const i=A(s),f=Re(s);!f&&i.position==="fixed"&&(r=null),(c?!f&&!r:!f&&i.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||re(s)&&!f&&Xe(e,s))?n=n.filter(a=>a!==s):r=i,s=H(s)}return t.set(e,n),n}function Tt(e){let{element:t,boundary:o,rootBoundary:n,strategy:r}=e;const s=[...o==="clippingAncestors"?ue(t)?[]:Ct(t,this._c):[].concat(o),n],i=s[0],f=s.reduce((l,a)=>{const g=De(t,a,r);return l.top=ne(g.top,l.top),l.right=Pe(g.right,l.right),l.bottom=Pe(g.bottom,l.bottom),l.left=ne(g.left,l.left),l},De(t,i,r));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function Pt(e){const{width:t,height:o}=He(e);return{width:t,height:o}}function St(e,t,o){const n=F(t),r=V(t),c=o==="fixed",s=oe(e,!0,c,t);let i={scrollLeft:0,scrollTop:0};const f=B(0);if(n||!n&&!c)if((z(t)!=="body"||re(r))&&(i=ae(t)),n){const h=oe(t,!0,c,t);f.x=h.x+t.clientLeft,f.y=h.y+t.clientTop}else r&&(f.x=be(r));const l=r&&!n&&!c?Ye(r,i):B(0),a=s.left+i.scrollLeft-f.x-l.x,g=s.top+i.scrollTop-f.y-l.y;return{x:a,y:g,width:s.width,height:s.height}}function ge(e){return A(e).position==="static"}function Le(e,t){if(!F(e)||A(e).position==="fixed")return null;if(t)return t(e);let o=e.offsetParent;return V(e)===o&&(o=o.ownerDocument.body),o}function je(e,t){const o=k(e);if(ue(e))return o;if(!F(e)){let r=H(e);for(;r&&!$(r);){if(T(r)&&!ge(r))return r;r=H(r)}return o}let n=Le(e,t);for(;n&&lt(n)&&ge(n);)n=Le(n,t);return n&&$(n)&&ge(n)&&!Re(n)?o:n||ut(e)||o}const Dt=async function(e){const t=this.getOffsetParent||je,o=this.getDimensions,n=await o(e.floating);return{reference:St(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Lt(e){return A(e).direction==="rtl"}const Mt={convertOffsetParentRelativeRectToViewportRelativeRect:xt,getDocumentElement:V,getClippingRect:Tt,getOffsetParent:je,getElementRects:Dt,getClientRects:Rt,getDimensions:Pt,getScale:Z,isElement:T,isRTL:Lt},Ot=(e,t,o)=>{const n=new Map,r={platform:Mt,...o},c={...r.platform,_c:n};return ht(e,t,{...r,platform:c})};var se=typeof document<"u"?u.useLayoutEffect:u.useEffect;function ce(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let o,n,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(o=e.length,o!==t.length)return!1;for(n=o;n--!==0;)if(!ce(e[n],t[n]))return!1;return!0}if(r=Object.keys(e),o=r.length,o!==Object.keys(t).length)return!1;for(n=o;n--!==0;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=o;n--!==0;){const c=r[n];if(!(c==="_owner"&&e.$$typeof)&&!ce(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function Ue(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Me(e,t){const o=Ue(e);return Math.round(t*o)/o}function me(e){const t=u.useRef(e);return se(()=>{t.current=e}),t}function kt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:o="absolute",middleware:n=[],platform:r,elements:{reference:c,floating:s}={},transform:i=!0,whileElementsMounted:f,open:l}=e,[a,g]=u.useState({x:0,y:0,strategy:o,placement:t,middlewareData:{},isPositioned:!1}),[h,d]=u.useState(n);ce(h,n)||d(n);const[R,m]=u.useState(null),[b,E]=u.useState(null),S=u.useCallback(y=>{y!==_.current&&(_.current=y,m(y))},[]),x=u.useCallback(y=>{y!==I.current&&(I.current=y,E(y))},[]),P=c||R,D=s||b,_=u.useRef(null),I=u.useRef(null),K=u.useRef(a),N=f!=null,U=me(f),Y=me(r),G=me(l),X=u.useCallback(()=>{if(!_.current||!I.current)return;const y={placement:t,strategy:o,middleware:h};Y.current&&(y.platform=Y.current),Ot(_.current,I.current,y).then(p=>{const C={...p,isPositioned:G.current!==!1};q.current&&!ce(K.current,C)&&(K.current=C,ct.flushSync(()=>{g(C)}))})},[h,t,o,Y,G]);se(()=>{l===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,g(y=>({...y,isPositioned:!1})))},[l]);const q=u.useRef(!1);se(()=>(q.current=!0,()=>{q.current=!1}),[]),se(()=>{if(P&&(_.current=P),D&&(I.current=D),P&&D){if(U.current)return U.current(P,D,X);X()}},[P,D,X,U,N]);const w=u.useMemo(()=>({reference:_,floating:I,setReference:S,setFloating:x}),[S,x]),v=u.useMemo(()=>({reference:P,floating:D}),[P,D]),L=u.useMemo(()=>{const y={position:o,left:0,top:0};if(!v.floating)return y;const p=Me(v.floating,a.x),C=Me(v.floating,a.y);return i?{...y,transform:"translate("+p+"px, "+C+"px)",...Ue(v.floating)>=1.5&&{willChange:"transform"}}:{position:o,left:p,top:C}},[o,i,v.floating,a.x,a.y]);return u.useMemo(()=>({...a,update:X,refs:w,elements:v,floatingStyles:L}),[a,X,w,v,L])}const qe={...it},_t=qe.useInsertionEffect,It=_t||(e=>e());function J(e){const t=u.useRef(()=>{});return It(()=>{t.current=e}),u.useCallback(function(){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return t.current==null?void 0:t.current(...n)},[])}var xe=typeof document<"u"?u.useLayoutEffect:u.useEffect;let Oe=!1,At=0;const ke=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+At++;function Ft(){const[e,t]=u.useState(()=>Oe?ke():void 0);return xe(()=>{e==null&&t(ke())},[]),u.useEffect(()=>{Oe=!0},[]),e}const Nt=qe.useId,Ge=Nt||Ft;function Bt(){const e=new Map;return{emit(t,o){var n;(n=e.get(t))==null||n.forEach(r=>r(o))},on(t,o){e.set(t,[...e.get(t)||[],o])},off(t,o){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(r=>r!==o))||[])}}}const Wt=u.createContext(null),$t=u.createContext(null),Je=()=>{var e;return((e=u.useContext(Wt))==null?void 0:e.id)||null},Qe=()=>u.useContext($t);function Ht(e){return"data-floating-ui-"+e}function pe(e,t){let o=e.filter(r=>{var c;return r.parentId===t&&((c=r.context)==null?void 0:c.open)}),n=o;for(;n.length;)n=e.filter(r=>{var c;return(c=n)==null?void 0:c.some(s=>{var i;return r.parentId===s.id&&((i=r.context)==null?void 0:i.open)})}),o=o.concat(n);return o}const Vt="data-floating-ui-focusable",Kt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Yt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},_e=e=>{var t,o;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(o=e==null?void 0:e.outsidePress)!=null?o:!0}};function Gt(e,t){t===void 0&&(t={});const{open:o,onOpenChange:n,elements:r,dataRef:c}=e,{enabled:s=!0,escapeKey:i=!0,outsidePress:f=!0,outsidePressEvent:l="pointerdown",referencePress:a=!1,referencePressEvent:g="pointerdown",ancestorScroll:h=!1,bubbles:d,capture:R}=t,m=Qe(),b=J(typeof f=="function"?f:()=>!1),E=typeof f=="function"?b:f,S=u.useRef(!1),x=u.useRef(!1),{escapeKey:P,outsidePress:D}=_e(d),{escapeKey:_,outsidePress:I}=_e(R),K=u.useRef(!1),N=J(w=>{var v;if(!o||!s||!i||w.key!=="Escape"||K.current)return;const L=(v=c.current.floatingContext)==null?void 0:v.nodeId,y=m?pe(m.nodesRef.current,L):[];if(!P&&(w.stopPropagation(),y.length>0)){let p=!0;if(y.forEach(C=>{var M;if((M=C.context)!=null&&M.open&&!C.context.dataRef.current.__escapeKeyBubbles){p=!1;return}}),!p)return}n(!1,ft(w)?w.nativeEvent:w,"escape-key")}),U=J(w=>{var v;const L=()=>{var y;N(w),(y=te(w))==null||y.removeEventListener("keydown",L)};(v=te(w))==null||v.addEventListener("keydown",L)}),Y=J(w=>{var v;const L=S.current;S.current=!1;const y=x.current;if(x.current=!1,l==="click"&&y||L||typeof E=="function"&&!E(w))return;const p=te(w),C="["+Ht("inert")+"]",M=Te(r.floating).querySelectorAll(C);let j=T(p)?p:null;for(;j&&!$(j);){const O=H(j);if($(O)||!T(O))break;j=O}if(M.length&&T(p)&&!at(p)&&!Ce(p,r.floating)&&Array.from(M).every(O=>!Ce(j,O)))return;if(F(p)&&q){const O=$(p),W=A(p),ee=/auto|scroll/,ze=O||ee.test(W.overflowX),et=O||ee.test(W.overflowY),tt=ze&&p.clientWidth>0&&p.scrollWidth>p.clientWidth,nt=et&&p.clientHeight>0&&p.scrollHeight>p.clientHeight,ot=W.direction==="rtl",rt=nt&&(ot?w.offsetX<=p.offsetWidth-p.clientWidth:w.offsetX>p.clientWidth),st=tt&&w.offsetY>p.clientHeight;if(rt||st)return}const ve=(v=c.current.floatingContext)==null?void 0:v.nodeId,Ze=m&&pe(m.nodesRef.current,ve).some(O=>{var W;return de(w,(W=O.context)==null?void 0:W.elements.floating)});if(de(w,r.floating)||de(w,r.domReference)||Ze)return;const Ee=m?pe(m.nodesRef.current,ve):[];if(Ee.length>0){let O=!0;if(Ee.forEach(W=>{var ee;if((ee=W.context)!=null&&ee.open&&!W.context.dataRef.current.__outsidePressBubbles){O=!1;return}}),!O)return}n(!1,w,"outside-press")}),G=J(w=>{var v;const L=()=>{var y;Y(w),(y=te(w))==null||y.removeEventListener(l,L)};(v=te(w))==null||v.addEventListener(l,L)});u.useEffect(()=>{if(!o||!s)return;c.current.__escapeKeyBubbles=P,c.current.__outsidePressBubbles=D;let w=-1;function v(M){n(!1,M,"ancestor-scroll")}function L(){window.clearTimeout(w),K.current=!0}function y(){w=window.setTimeout(()=>{K.current=!1},fe()?5:0)}const p=Te(r.floating);i&&(p.addEventListener("keydown",_?U:N,_),p.addEventListener("compositionstart",L),p.addEventListener("compositionend",y)),E&&p.addEventListener(l,I?G:Y,I);let C=[];return h&&(T(r.domReference)&&(C=Q(r.domReference)),T(r.floating)&&(C=C.concat(Q(r.floating))),!T(r.reference)&&r.reference&&r.reference.contextElement&&(C=C.concat(Q(r.reference.contextElement)))),C=C.filter(M=>{var j;return M!==((j=p.defaultView)==null?void 0:j.visualViewport)}),C.forEach(M=>{M.addEventListener("scroll",v,{passive:!0})}),()=>{i&&(p.removeEventListener("keydown",_?U:N,_),p.removeEventListener("compositionstart",L),p.removeEventListener("compositionend",y)),E&&p.removeEventListener(l,I?G:Y,I),C.forEach(M=>{M.removeEventListener("scroll",v)}),window.clearTimeout(w)}},[c,r,i,E,l,o,n,h,s,P,D,N,_,U,Y,I,G]),u.useEffect(()=>{S.current=!1},[E,l]);const X=u.useMemo(()=>({onKeyDown:N,...a&&{[Kt[g]]:w=>{n(!1,w.nativeEvent,"reference-press")},...g!=="click"&&{onClick(w){n(!1,w.nativeEvent,"reference-press")}}}}),[N,n,a,g]),q=u.useMemo(()=>({onKeyDown:N,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[Yt[l]]:()=>{S.current=!0}}),[N,l]);return u.useMemo(()=>s?{reference:X,floating:q}:{},[s,X,q])}function Xt(e){const{open:t=!1,onOpenChange:o,elements:n}=e,r=Ge(),c=u.useRef({}),[s]=u.useState(()=>Bt()),i=Je()!=null,[f,l]=u.useState(n.reference),a=J((d,R,m)=>{c.current.openEvent=d?R:void 0,s.emit("openchange",{open:d,event:R,reason:m,nested:i}),o==null||o(d,R,m)}),g=u.useMemo(()=>({setPositionReference:l}),[]),h=u.useMemo(()=>({reference:f||n.reference||null,floating:n.floating||null,domReference:n.reference}),[f,n.reference,n.floating]);return u.useMemo(()=>({dataRef:c,open:t,onOpenChange:a,elements:h,events:s,floatingId:r,refs:g}),[t,a,h,s,r,g])}function Jt(e){e===void 0&&(e={});const{nodeId:t}=e,o=Xt({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||o,r=n.elements,[c,s]=u.useState(null),[i,f]=u.useState(null),a=(r==null?void 0:r.domReference)||c,g=u.useRef(null),h=Qe();xe(()=>{a&&(g.current=a)},[a]);const d=kt({...e,elements:{...r,...i&&{reference:i}}}),R=u.useCallback(x=>{const P=T(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;f(P),d.refs.setReference(P)},[d.refs]),m=u.useCallback(x=>{(T(x)||x===null)&&(g.current=x,s(x)),(T(d.refs.reference.current)||d.refs.reference.current===null||x!==null&&!T(x))&&d.refs.setReference(x)},[d.refs]),b=u.useMemo(()=>({...d.refs,setReference:m,setPositionReference:R,domReference:g}),[d.refs,m,R]),E=u.useMemo(()=>({...d.elements,domReference:a}),[d.elements,a]),S=u.useMemo(()=>({...d,...n,refs:b,elements:E,nodeId:t}),[d,b,E,t,n]);return xe(()=>{n.dataRef.current.floatingContext=S;const x=h==null?void 0:h.nodesRef.current.find(P=>P.id===t);x&&(x.context=S)}),u.useMemo(()=>({...d,context:S,refs:b,elements:E}),[d,b,E,S])}const Ie="active",Ae="selected";function he(e,t,o){const n=new Map,r=o==="item";let c=e;if(r&&e){const{[Ie]:s,[Ae]:i,...f}=e;c=f}return{...o==="floating"&&{tabIndex:-1,[Vt]:""},...c,...t.map(s=>{const i=s?s[o]:null;return typeof i=="function"?e?i(e):null:i}).concat(e).reduce((s,i)=>(i&&Object.entries(i).forEach(f=>{let[l,a]=f;if(!(r&&[Ie,Ae].includes(l)))if(l.indexOf("on")===0){if(n.has(l)||n.set(l,[]),typeof a=="function"){var g;(g=n.get(l))==null||g.push(a),s[l]=function(){for(var h,d=arguments.length,R=new Array(d),m=0;m<d;m++)R[m]=arguments[m];return(h=n.get(l))==null?void 0:h.map(b=>b(...R)).find(b=>b!==void 0)}}}else s[l]=a}),s),{})}}function Qt(e){e===void 0&&(e=[]);const t=e.map(i=>i==null?void 0:i.reference),o=e.map(i=>i==null?void 0:i.floating),n=e.map(i=>i==null?void 0:i.item),r=u.useCallback(i=>he(i,e,"reference"),t),c=u.useCallback(i=>he(i,e,"floating"),o),s=u.useCallback(i=>he(i,e,"item"),n);return u.useMemo(()=>({getReferenceProps:r,getFloatingProps:c,getItemProps:s}),[r,c,s])}const jt=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Zt(e,t){var o;t===void 0&&(t={});const{open:n,floatingId:r}=e,{enabled:c=!0,role:s="dialog"}=t,i=(o=jt.get(s))!=null?o:s,f=Ge(),a=Je()!=null,g=u.useMemo(()=>i==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:n?r:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:f},...i==="menu"&&a&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[i,r,a,n,f,s]),h=u.useMemo(()=>{const R={id:r,...i&&{role:i}};return i==="tooltip"||s==="label"?R:{...R,...i==="menu"&&{"aria-labelledby":f}}},[i,r,f,s]),d=u.useCallback(R=>{let{active:m,selected:b}=R;const E={role:"option",...m&&{id:r+"-option"}};switch(s){case"select":return{...E,"aria-selected":m&&b};case"combobox":return{...E,...m&&{"aria-selected":!0}}}return{}},[r,s]);return u.useMemo(()=>c?{reference:g,floating:h,item:d}:{},[c,g,h,d])}export{Gt as a,Zt as b,Qt as c,Jt as u};
